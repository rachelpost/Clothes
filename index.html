<!DOCTYPE html>
<html lang="en">

<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
<title>Welcome to Clothes!</title>
<!-- Bootstrap -->
<link href="bootstrap/css/bootstrap.css" rel="stylesheet">
<script src="bootstrap/js/bootstrap.js"></script>
<script type="text/javascript" language="javascript" src="bootstrap/js/jquery-1.8.2.js"></script>
<script type="text/javascript" language="javascript" src="bootstrap/js/jquery.dataTables.js"></script>
<script type="text/javascript" charset="utf-8">
			/* Table initialisation */
			$(document).ready(function() {
				$('#wardrobeTable').dataTable( {
					"sDom": "<'row'<'span3'f>r>t>",
					"bPaginate": false,
					"bInfo":false,
					"aoColumns": [
						{ "sWidth": "50px" },
						{ "sWidth": "150px" },
						{ "sWidth": "150px" },
						{ "sWidth": "90px" },
						{ "sWidth": "80px" },
						{ "sWidth": "90px" },
						{ "sWidth": "80px" },
						{ "sWidth": "90px" },
						{ "sWidth": "80px" },
						{ "sWidth": "70px" },
						{ "sWidth": "90px" },
						{ "sWidth": "50px" },
					]
				} );
			} );
		</script>
</head>


<body onload="preparePage()">


<div class="centerBlock page-header">
<h1>Outfits</h1>
</div>
<div class="centerBlock bottomSpace10"><span> Enter Date: <input type="text" id="dateInput" class="input-medium search-query"
/> <input type="button" class="btn" value="Show Outfit"
	onclick="showOutfit()"
/> </span></div>
<div id="outfitDiv" class="outfitDiv centerBlock bottomSpace50"></div>
<div class="row centerBlock"></div>

<div class="row centerText page-header">
<h1>Wardrobe</h1>
</div>

<div class="row centerText bottomSpace20">
<span> 
<INPUT type="button" class="btn spaceRight" value="Add Selected Items to Outfit" onclick="addSelectedItemsToOutfit()"/>
<INPUT type="button" value="Add New Item to Wardrobe" class="btn spaceRight" onclick="addRow('wardrobeTable')" />
<INPUT type="button" value="Delete Selected Items from Wardrobe" class="btn spaceRight" onclick="deleteConfirmation()" />
</span>
</div>



<div class="closetTable row-fluid">
<div id="closet" class="centerBlock ">


<table cellpadding="0" cellspacing="0" border="0" class="bordered-table table-hover" id="wardrobeTable">
	<thead>
		<tr>
			<th>Photo</th>
			<th>Name</th>
			<th>Desc</th>
			<th>Color</th>
			<th>Category</th>
			<th>Date Added</th>
			<th>Cost</th>
			<th>Store</th>
			<th># Worn</th>
			<th>Cost/Wear</th>
			<th>Last Worn</th>
			<th>Select</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><img class="itemImg" src="images/blackBlouse.jpeg"
				alt="Black Blouse"></td>
			<td contenteditable="true">Black Blouse</td>
			<td contenteditable="true">Black silk bib blouse</td>
			<td contenteditable="true">black</td>
			<td contenteditable="true">Blouse</td>
			<td contenteditable="true">13-Jan-2012</td>
			<td contenteditable="true">$129.00</td>
			<td contenteditable="true">Nordstrom</td>
			<td contenteditable="true">32</td>
			<td contenteditable="true">$5.43</td>
			<td contenteditable="true">1-Oct-2012</td>
			<td><INPUT type="checkbox" name="chk" /></td>
		</tr>

		<tr>
			<td><img class="itemImg" src="images/greenTShirt.jpeg"
				alt="Green Tee"></td>
			<td contenteditable="true">Green Tee Shirt</td>
			<td contenteditable="true">Green cotton short-sleeved tee-shirt</td>
			<td contenteditable="true">green</td>
			<td contenteditable="true">Tees</td>
			<td contenteditable="true">4-Jun-2012</td>
			<td contenteditable="true">9.99</td>
			<td contenteditable="true">Gap</td>
			<td contenteditable="true">22</td>
			<td contenteditable="true">$0.28</td>
			<td contenteditable="true">8-Aug-2012</td>
			<td><INPUT type="checkbox" name="chk" /></td>
		</tr>

		<tr>
			<td><img class="itemImg" src="images/jeans.jpeg" alt="Jeans"></td>
			<td contenteditable="true">Jeans</td>
			<td contenteditable="true">Joe's jeans bootcut</td>
			<td contenteditable="true">blue</td>
			<td contenteditable="true">jeans</td>
			<td contenteditable="true">4-Feb-2012</td>
			<td contenteditable="true">258.00</td>
			<td contenteditable="true">Bloomingdale's</td>
			<td contenteditable="true">55</td>
			<td contenteditable="true">$1.25</td>
			<td contenteditable="true">15-Oct-2012</td>
			<td><INPUT type="checkbox" name="chk"/></td>
		</tr>

		<tr>
			<td><img class="itemImg"
				src="images/orangeLongSleevedTShirt.jpeg" alt="Orange Tee"></td>
			<td contenteditable="true">Orange Tee</td>
			<td contenteditable="true">Orange long-sleeved tee-shirt</td>
			<td contenteditable="true">Orange</td>
			<td contenteditable="true">Tees</td>
			<td contenteditable="true">24-Mar-2012</td>
			<td contenteditable="true">$23.88</td>
			<td contenteditable="true">Loft</td>
			<td contenteditable="true">3</td>
			<td contenteditable="true">$8.76</td>
			<td contenteditable="true">9-Sep-2012</td>
			<td><INPUT type="checkbox" name="chk" /></td>
		</tr>

		<tr>
			<td><img class="itemImg" src="images/redDress.jpeg"
				alt="Red Dress"></td>
			<td contenteditable="true">Red Dress</td>
			<td contenteditable="true">Red Strapless Dress</td>
			<td contenteditable="true">Red</td>
			<td contenteditable="true">Dress</td>
			<td contenteditable="true">3-Dec-2011</td>
			<td contenteditable="true">$500.84</td>
			<td contenteditable="true">Neiman Marcus</td>
			<td contenteditable="true">2</td>
			<td contenteditable="true">$250.94</td>
			<td contenteditable="true">1-Jan-2012</td>
			<td><INPUT type="checkbox" name="chk" /></td>
		</tr>

		<tr>
			<td><img class="itemImg" src="images/whiteBlouse.jpeg"
				alt="White Blouse"></td>
			<td contenteditable="true">White Blouse</td>
			<td contenteditable="true" width="100px">White bib blouse cotton that I really liked
			but then I got a ketchup stain on it and i'm not sure it will come
			out</td>
			<td contenteditable="true">white</td>
			<td contenteditable="true">Blouse</td>
			<td contenteditable="true">14-Feb-2012</td>
			<td contenteditable="true">$0.00</td>
			<td contenteditable="true">Brent</td>
			<td contenteditable="true">16</td>
			<td contenteditable="true">$0.00</td>
			<td contenteditable="true">2-Sept-2012</td>
			<td><INPUT type="checkbox" name="chk" /></td>
		</tr>
	</tbody>
</table>
</div>
</div>


</body>

<SCRIPT language="javascript" type="text/javascript">
 function showAlert(){
	alert("Photo loading!");
	 }


function showOutfit(){
	try {

		var outfitDiv= document.getElementById("outfitDiv");
		while (outfitDiv.hasChildNodes()) {
			outfitDiv.removeChild(outfitDiv.lastChild);
		}



		
		var dateFromInput = document.getElementById("dateInput").value;

		addOutfitDivHeader(dateFromInput);

		
		
		
		addItemToOutfit("White Blouse","images/whiteBlouse.jpeg" );

		addItemToOutfit("Jeans","images/jeans.jpeg" );
	}
	catch (e) {
		alert(e);
	}
}

function addOutfitDivHeader(txt){

	var outfitDiv= document.getElementById("outfitDiv");
	
	var oldHeader = document.getElementById("outfitHeader");

	if(oldHeader){
		outfitDiv.removeChild(oldHeader);
	}

	var dateText = document.createElement("h3");
	dateText.innerHTML="Outfit for " + txt;
	dateText.id="outfitHeader";
<!--	dateText.className="";-->

	var outfitDiv= document.getElementById("outfitDiv");
	outfitDiv.insertBefore(dateText, outfitDiv.firstChild);
}

function addItemToOutfit(itemName, itemSrc){

	var itemExists = document.getElementById(itemName);
	if(itemExists) return 0;
	
	var item1Div = document.createElement("div");
	item1Div.id=itemName;
	
	var item1 = document.createElement("img");
	item1.src=itemSrc;
	item1.className="itemImg";
	item1Div.appendChild(item1);

	var deleteButton = document.createElement("button");
	deleteButton.innerHTML="<i class=\"icon-remove\"></i>";
	deleteButton.onclick=function(){
		removeItemFromOutfit(itemName)
		};
	
	item1Div.appendChild(deleteButton);

	var outfitDiv= document.getElementById("outfitDiv");
	outfitDiv.appendChild(item1Div);
}

function removeItemFromOutfit(itemName){

	var outfitDiv= document.getElementById("outfitDiv");

	var itemDiv = document.getElementById(itemName);

	outfitDiv.removeChild(itemDiv);
}

function addSelectedItemsToOutfit(){
	try {
		var table = document.getElementById("wardrobeTable");
		var rowCount = table.rows.length;

		for ( var i = 0; i < rowCount; i++) {
			var row = table.rows[i];
			var chkbox = row.cells[11].childNodes[0];
			if (null != chkbox && true == chkbox.checked) {
				var itemName = row.cells[1].childNodes[0].nodeValue;
				var photoSource = row.cells[0].childNodes[0].getAttribute("src");

				addItemToOutfit(itemName, photoSource);
				
			}

		}
	} catch (e) {
		alert(e);
	}

	clearCheckboxes();
}

function clearCheckboxes(){
	try {
		var table = document.getElementById("wardrobeTable");
		var rowCount = table.rows.length;

		for ( var i = 0; i < rowCount; i++) {
			var row = table.rows[i];
			var chkbox = row.cells[11].childNodes[0];
			if (null != chkbox && true == chkbox.checked) {
				chkbox.checked=false;
				
			}

		}
	} catch (e) {
		alert(e);
	}
}

function createAddPhotoModal(rowNumber){
	var modal = document.createElement("div");
	modal.class="modal";
	modal.id="photoAddModal" + rowNumber;
	modal.tabIndex="-1";
	modal.role="dialog";

	var modalBody = document.createElement("div");
	modalBody.class="modal-body";

	var browse = document.createElement("input");
	browse.type="file";
	browse.name="browseToPhoto";

	modalBody.appendChild(browse);
	modal.appendChild(modalBody);



	return modal;
}
 

 function addPhotoToRow(rowNumber){
	 try {
			var table = document.getElementById("wardrobeTable");
			var rowCount = table.rows.length;
			var row = table.rows[rowNumber];
			var photoCell = row.cells[0].childNodes[0];
			if (null != photoCell) {
				photoCell.innerHTML="";
				var photo = document.createElement("img");
				photo.src="images/jeans.jpeg";
				photoCell.appendChild(photo);
			}
		} catch (e) {
			alert(e);
		}
}

function addRow(tableID) {

		var table = document.getElementById(tableID);

		var rowCount = table.rows.length;
		var row = table.insertRow(rowCount);

		var cellPhoto = row.insertCell(0);
<!--		var selectPhotoFile = document.createElement("button");-->
<!--		 selectPhotoFile.onclick = (function() {-->
<!--		      return function() { -->
<!--		    	  addPhotoToRow(rowCount + '');-->
<!--		      }-->
<!--		   })();		   -->
<!--		 selectPhotoFile.innerHTML="Add Photo";-->
<!--         cellPhoto.appendChild(selectPhotoFile);-->



<!--		var photoModal = createAddPhotoModal(rowCount);-->
<!--		var allModals = document.getElementById("allModals");-->
<!--		allModals.appendChild(photoModal);-->
<!--		-->
		var addFileButton = document.createElement("a");
<!--		addFileButton.href="#" + photoModal.id;-->
		addFileButton.role="button";
		addFileButton.class="btn";
<!--		addFileButton.setAttribute("data-toggle","modal");-->
		addFileButton.innerHTML="Add Photo";
		cellPhoto.appendChild(addFileButton);
	
		var cellName = row.insertCell(1);
		cellName.innerHTML = "Name";
		cellName.setAttribute("contenteditable", "true");
		
		var cellDesc = row.insertCell(2);
		cellDesc.innerHTML = "Desc";
		cellDesc.setAttribute("contenteditable", "true");
		
		var cellColor = row.insertCell(3);
		cellColor.innerHTML = "Color";
		cellColor.setAttribute("contenteditable", "true");
		
		var cellCategory = row.insertCell(4);
		cellCategory.innerHTML = "Category";
		cellCategory.setAttribute("contenteditable", "true");
			
		var cellDateAdded = row.insertCell(5);
		cellDateAdded.innerHTML = "DateAdded";
		cellDateAdded.setAttribute("contenteditable", "true");
		
		var cellCost = row.insertCell(6);
		cellCost.innerHTML = "Cost";
		cellCost.setAttribute("contenteditable", "true");
		
		var cellStore = row.insertCell(7);
		cellStore.innerHTML = "Store";
		cellStore.setAttribute("contenteditable", "true");
		
		var cellNoWorn = row.insertCell(8);
		cellNoWorn.innerHTML = "#Worn";
		cellNoWorn.setAttribute("contenteditable", "true");
		
		var cellCostPerWear = row.insertCell(9);
		cellCostPerWear.innerHTML = "CostPerWear";
		cellCostPerWear.setAttribute("contenteditable", "true");
		
		var cellLastWorn = row.insertCell(10);
		cellLastWorn.innerHTML = "LastWorn";
		cellLastWorn.setAttribute("contenteditable", "true");


		 var cellSelect = row.insertCell(11);
         var selectElement = document.createElement("input");
         selectElement.type = "checkbox";
         cellSelect.appendChild(selectElement);

         alert("Select cell to edit content at any time- your changes will be saved automatically");

	}

	function deleteRows(tableID) {
		try {
			var table = document.getElementById(tableID);
			var rowCount = table.rows.length;

			for ( var i = 0; i < rowCount; i++) {
				var row = table.rows[i];
				var chkbox = row.cells[11].childNodes[0];
				if (null != chkbox && true == chkbox.checked) {
					table.deleteRow(i);
					rowCount--;
					i--;
				}

			}
		} catch (e) {
			alert(e);
		}
	}

function doSearch(){
	<!--	populate Search with "blouse"-->
	var searchInput = document.getElementById("searchInput");
	searchInput.value = "blouse";

}

function getCurrentDate(){
	var today = new Date();
	var dd = today.getDate();
	var mm = today.getMonth()+1; //January is 0!

	var yyyy = today.getFullYear();
	if(dd<10){dd='0'+dd} if(mm<10){mm='0'+mm} today = mm+'/'+dd+'/'+yyyy;

	return today;
}

function preparePage(){
	var today = getCurrentDate();

	var dateInput = document.getElementById("dateInput");
	dateInput.value=today;

	showOutfit();
}

function getCheckedNames(){	
	var result ="";
	try {
		
		var table = document.getElementById("wardrobeTable");
		var rowCount = table.rows.length;

		for ( var i = 0; i < rowCount; i++) {
			var row = table.rows[i];
			var chkbox = row.cells[11].childNodes[0];
			if (null != chkbox && true == chkbox.checked) {
				var itemName = row.cells[1].childNodes[0].nodeValue;
				
				result += itemName + ", ";
				
			}

		}
	} catch (e) {
		alert(e);
	}

	return result;
}

function deleteConfirmation()
{		
	var itemsToDelete = getCheckedNames();
	
var x;
var r=confirm("Are you sure you want to delete the following items from your wardrobe?" + itemsToDelete);
if (r==true)
  {
	deleteRows('wardrobeTable');
  }
else
  {
	alert("No items will be deleted from your wardrobe!");
  }

}

</SCRIPT>
</html>